!function(t,e){"use strict";function r(t,e){var r,i;if("function"==typeof e)i=e(t),void 0!==i&&(t=i);else if(Array.isArray(e))for(r=0;r<e.length;r++)i=e[r](t),void 0!==i&&(t=i);return t}function i(t,e){return"-"===t[0]&&Array.isArray(e)&&/^-\d+$/.test(t)?e.length+parseInt(t,10):t}function n(t,e){return this instanceof n?("undefined"==typeof t&&(t="."),"undefined"==typeof e&&(e=!1),this.seperator=t,this.override=e,void(this.cleanup=[])):new n(t,e)}function o(t){return function(){return p[t].apply(p,arguments)}}function s(t){return"[object Object]"===Object.prototype.toString.call(t)}var p=new n(".",!1);n.prototype._fill=function(t,e,i,n){var o=t.shift();if(t.length>0){if(e[o]=e[o]||{},e[o]!==Object(e[o])){if(!this.override)throw new Error("Trying to redefine `"+o+"` which is a "+typeof e[o]);e[o]={}}this._fill(t,e[o],i,n)}else{if(e[o]===Object(e[o])&&Object.keys(e[o]).length)throw new Error("Trying to redefine non-empty obj['"+o+"']");e[o]=r(i,n)}},n.prototype.object=function(t,e){var i=this;Object.keys(t).forEach(function(n){var o=void 0===e?null:e[n];-1!==n.indexOf(i.seperator)?(i._fill(n.split(i.seperator),t,t[n],o),delete t[n]):i.override&&(t[n]=r(t[n],o))})},n.prototype.str=function(t,e,i,n){-1!==t.indexOf(this.seperator)?this._fill(t.split(this.seperator),i,e,n):this.override&&(i[t]=r(e,n))},n.prototype.pick=function(t,e,r){var n,o,s,p,f;for(o=t.split(this.seperator),n=0;n<o.length;n++){if(p=i(o[n],e),!(e&&"object"==typeof e&&p in e))return void 0;if(n===o.length-1)return r?(s=e[p],delete e[p],Array.isArray(e)&&(f=o.slice(0,-1).join("."),-1===this.cleanup.indexOf(f)&&this.cleanup.push(f)),s):e[p];e=e[p]}return r&&Array.isArray(e)&&(e=e.filter(function(t){return void 0!==t})),e},n.prototype.remove=function(t,e){var r;if(this.cleanup=[],Array.isArray(t)){for(r=0;r<t.length;r++)this.pick(t[r],e,!0);return this._cleanup(e),e}return this.pick(t,e,!0)},n.prototype._cleanup=function(t){var e,r,i,n;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)i=this.cleanup[r].split("."),n=i.splice(0,-1).join("."),e=n?this.pick(n,t):t,e=e[i[0]].filter(function(t){return void 0!==t}),this.set(this.cleanup[r],e,t);this.cleanup=[]}},n.prototype.del=n.prototype.remove,n.prototype.move=function(t,e,i,n,o){return"function"==typeof n||Array.isArray(n)?this.set(e,r(this.pick(t,i,!0),n),i,o):(o=n,this.set(e,this.pick(t,i,!0),i,o)),i},n.prototype.transfer=function(t,e,i,n,o,s){return"function"==typeof o||Array.isArray(o)?this.set(e,r(this.pick(t,i,!0),o),n,s):(s=o,this.set(e,this.pick(t,i,!0),n,s)),n},n.prototype.copy=function(t,e,i,n,o,s){return"function"==typeof o||Array.isArray(o)?this.set(e,r(JSON.parse(JSON.stringify(this.pick(t,i,!1))),o),n,s):(s=o,this.set(e,this.pick(t,i,!1),n,s)),n},n.prototype.set=function(t,e,r,i){var n,o,p,f;if("undefined"==typeof e)return r;for(p=t.split(this.seperator),n=0;n<p.length;n++){if(f=p[n],n===p.length-1)if(i&&s(e)&&s(r[f]))for(o in e)e.hasOwnProperty(o)&&(r[f][o]=e[o]);else if(i&&Array.isArray(r[f])&&Array.isArray(e))for(var c=0;c<e.length;c++)r[p[n]].push(e[c]);else r[f]=e;else r.hasOwnProperty(f)&&(s(r[f])||Array.isArray(r[f]))||(r[f]=/^\d+$/.test(p[n+1])?[]:{});r=r[f]}return r},n.pick=o("pick"),n.move=o("move"),n.transfer=o("transfer"),n.copy=o("copy"),n.object=o("object"),n.str=o("str"),n.set=o("set"),n.del=n.remove=o("remove"),n._process=r,"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t[e]=n}(this,"DotObject");